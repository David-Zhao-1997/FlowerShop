<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/Objects.js"></script>
    <script src="js/jQuery.js"></script>
    <script src="js/viewer-jquery.min.js"></script>
    <link rel="stylesheet" href="css/viewer.min.css">
    <style>
        /** {*/
        /*margin: 0;*/
        /*padding: 0;*/
        /*}*/

        #album {
            width: 500px;
            /*margin: 0 auto;*/
            font-size: 0;
        }

        #album li {
            display: inline-block;
            width: 35%;
            margin-left: 1%;
            padding-top: 1%;
        }

        #album li img {
            width: 100%;
            cursor: pointer;
        }

        .container {
            width: 1000px;
            margin-left: auto;
            margin-right: auto;
        }

        .productWrapper {
            width: 1000px;
            margin-bottom: 40px;
            margin-left: auto;
            margin-right: auto;
            padding: 30px;
            border: 1px solid #d9d9d9;
        }

        #inf {
            font-family: tahoma, arial, 'Hiragino Sans GB', '\5b8b\4f53', sans-serif;
            font-size: 12px;
            color: #737373;
        }

        #inf dt {
            padding: 2px;
        }

        #price {
            color: #ff6a00;
        }

        #intro {
            float: right;
            margin-top: 40px;
            margin-right: 40px;
        }

        .breadcrumbs {
            margin: 4px;
        }

        #addToCart {
            background-color: #ff6a00;
            height: 50px;
            width: 150px;
            text-align: center;
            cursor: pointer;
        }

        #addToCart > span {
            color: #fff;
            line-height: 50px;
        }

        h4 {
            font-family: 华文楷体;
        }
    </style>
</head>
<body onload="reSize()">
<div class="container">
    <div class="breadcrumbs">首页 > 鲜花</div>
    <div class="productWrapper">
        <div id="intro">
            <h4 id="title">鲜花标题</h4>
            <hr>
            <dl id="inf">
                <dt>类 别：鲜花</dt>
                <dt>包 装：精美包装</dt>
                <dt>附 送：免费附送精美贺卡</dt>
                <dt>配 送：全国</dt>
            </dl>
            <hr>
            <h2 id="price">￥100</h2>

            <button id="addToCart" onclick="addToCart()">加入购物车</button>

        </div>
        <ul id="album"></ul>
    </div>
</div>
<div id="detail"></div>
<script>
    var album = document.getElementById("album");
    var clickedPic = sessionStorage.getItem('clickedPic');
    /*动态创建图片元素*/
    var thumbnailPath = "img/detailImage/"+clickedPic+"/";
    var sourcePath = "img/detailImage/"+clickedPic+"/";
    for (var i = 1; i <= 4; i++)
    {
        var newLi = document.createElement("li");
        var img = document.createElement("img");
        img.setAttribute("data-original", thumbnailPath + i + ".jpg");
        img.setAttribute("src", sourcePath + i + ".jpg");
        img.setAttribute("alt", "图片" + i);
        img.setAttribute("onclick", "window.parent.scrollTo(0,120);");
        newLi.appendChild(img);
        album.appendChild(newLi);
    }
</script>
<script>
    $(function () {
        $('#album').viewer({
            url: 'data-original'
        });
    });
</script>
<script>
    function getNum(text)
    {
        var value = text.replace(/[^0-9]/ig, "");
        return value;
    }

    function reSize()
    {
        var frame2 = window.parent.document.getElementById("iFrame2");
        frame2.height = document.body.clientHeight + 120;
    }

    var clickedPic = sessionStorage.getItem('clickedPic');//获取被点击图片的id
    //        var no = parseInt(clickedPic.match(/\d/g)[0]);//获取被点击图片的序号
    var no = getNum(clickedPic);
    //alert(no);
    var price = priceArr[no - 1];
    //alert(price);
    var detail = detailArr[no - 1];
    var floName = floNameArr[no - 1];
    document.getElementById("title").innerHTML = floName;
    document.getElementById("detail").innerHTML = detail;
    document.getElementById("price").innerHTML = "￥" + price;


    function addToCart()
    {
        var cartItems = [];
        if (localStorage.getItem("cartItems") != null)
        {
            cartItems = JSON.parse(localStorage.getItem("cartItems"));
        }
        if ($.inArray(no - 1, cartItems))
        {
            cartItems.splice(0, 0, no - 1);
            localStorage.setItem("cartItems", JSON.stringify(cartItems));
            alert("添加购物车成功");
        }
        else
        {
            alert("已加入购物车 请勿重复添加");
        }
    }

    window.parent.scrollTo(0, 0);
</script>
</body>
</html>
